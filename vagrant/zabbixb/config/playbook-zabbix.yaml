- hosts: core
  become: true
  tasks:
    # - name: Corrigindo reposit√≥rios depecrated do debian.
    #   ansible.builtin.shell:
    #     cmd: rm  /etc/apt/source.list

    # - name: Inserindo um novo source.list
    #   ansible.builtin.copy:
    #     src: /Users/rodrigo.silva.cunha/Documents/WorkDir/OFF/iac/vagrant/zabbixb/config/vagrant/sources.list
    #     dest: /etc/apt/
    #     owner: root
    #     group: root
    #     mode: '0644'
    - name: Inserindo um novo netplan
      ansible.builtin.copy:
        src: /Users/rodrigo.silva.cunha/Documents/WorkDir/OFF/iac/vagrant/zabbixb/config/vagrant/ethernet-core.yaml
        dest: /etc/netplan/00-installer-config.yaml
        owner: root
        group: root
        mode: '0644'

 
    - name: add repositorio do zabbix
      ansible.builtin.shell: wget https://repo.zabbix.com/zabbix/6.0/debian/pool/main/z/zabbix-release/zabbix-release_6.0-3%2Bdebian10_all.deb && dpkg -i zabbix-release_6.0-3+debian10_all.deb
 
    - name: Update repositories cache
      ansible.builtin.apt:
        update_cache: yes

    - name: Install a list of packages
      ansible.builtin.apt:
        name: zabbix-server-mysql
        
